apply plugin: 'java'

repositories {
    mavenCentral()
}

dependencies {
    compile 'org.slf4j:slf4j-api:1.7.21'
    compile group: 'org.jacoco', name: 'org.jacoco.core', version: '0.7.7.201606060606'
    compile group: 'org.jacoco', name: 'org.jacoco.report', version: '0.7.7.201606060606'
    compile files('libs/plume.jar')

    testCompile 'junit:junit:4.12'
}

task singleJar (type: Jar) {
  group "build"
  description "Assemble a fat jar archive of Randoop and runtime dependencies"
  manifest {
    attributes 'Main-class': 'randoop.jacoco.CoverageAnalyzer'
  }
  baseName = project.name + '-all'
  from ( configurations.compile.collect { it.isDirectory() ? it : zipTree(it) } ) {
    exclude "META-INF/*.SF"
    exclude "META-INF/*.DSA"
    exclude "META-INF/*.RSA"
  }
  with jar
}

assemble.dependsOn singleJar
